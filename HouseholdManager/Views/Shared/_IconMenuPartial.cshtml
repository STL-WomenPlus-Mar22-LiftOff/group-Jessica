

<div class="icon-picker">
    <span>
        <button type="button" class="btn btn-secondary" id="iconSelectButton">Select Icon</button>
        <label id="iconDisplay" for="iconSelectButton"></label>
    </span>
    <noscript>Icon selector requires JavaScript.</noscript>
    <div class="container-md box-shadow icon-picker-menu" id="iconMenu" hidden>
        <input type="search" id="iconSearch" placeholder="Search..." />
        <ul class="icon-button-list">
            @foreach (Icon icon in (IEnumerable<Icon>)ViewBag.Icons)
            {
                <li class="icon-button-item" title=@(icon.Slug.ToString()) onclick="selectIcon(this.title, this.innerText)">@icon.Character</li>
            }
        </ul>
    </div>
</div>

<script id="iconMenuScript">
    const iconNames = '@ViewBag.IconNames';
    const iconToggle = document.getElementById("iconSelectButton");
    const iconMenu = document.getElementById("iconMenu");
    const iconSearchBar = document.getElementById("iconSearch");
    const iconFormField = document.getElementById("iconInput");
    const iconDisplay = document.getElementById("iconDisplay");

    function selectIcon(selection, character) {
        iconFormField.setAttribute("value", selection);
        iconMenu.toggleAttribute("hidden");
        iconDisplay.innerText = character;
    }

    iconToggle.addEventListener("click", () => {
        iconMenu.toggleAttribute("hidden");
    });

    iconSearchBar.addEventListener("keyup", e => {
        const term = e.target.value;
        for (const listItem of document.querySelectorAll("li[emoji]")) {
            if (listItem.getAttribute("emoji").includes(term.toLowerCase())) {
                listItem.style.display = "flex";
            } else {
                listItem.style.display = "none";
            }
        }
    });

</script>